<html>
<link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
<header class=container>
	<div id="top-header">
		<div id="logo">
			<img id = 'img_logo' src="{{ url_for('static', filename='todo.png') }}" />
		</div>
		<nav>
	<ul>
        <li ><a href="{{ url_for('tasks_page') }}" ><p>Task Page</p></a></li>
        <li class="dropdown">
	  <a href="javascript:void(0)" class="dropbtn"><p>{{ session['username'] }}</p></a>
          <div class="dropdown-content">
          <a href="{{ url_for('settings_page') }}"><p>Settings</p></a>
          <a href="{{ url_for('log_in_page') }}"><p>Logout</p></a>
          </div>
        </li></ul></nav>
	</div>
	<div id="headingbar">
		<span>To Do List</span>
		<p>Settings</p>
	</div>
	</header>
	<body id = 'theme' class = 'lightmode'>
		<div style="height:110px; width:100%"></div>
			<form name="settings" action="/settings_page" enctype="multipart/form-data" method="POST">
			<table>
				<tr><td><label for = "uname">Username:</label></td><td><p>{{ session['username'] }}</p></td></tr>
				<tr><td><label for = "email_id">Email:</label></td><td><input type="text" id = "email" name="email" value="{{session['email']}}"></td></tr>
				<tr><td><label for = "password">Password:</label></td><td><input type="password" id = "password" name="password" value=""></td></tr>
				<tr><td><label for = "mode">Theme:</label><td><select id="mode" name="mode">
						<option value="Light">Light</option>
						<option value="Dark">Dark</option>
				</select></td></tr>
				<tr><td><button type= "submit" id = "change_settings" name="change_settings"><p>Change</p></button></td></tr>
			</table>
			</form>
		</div>
		{%- for message in get_flashed_messages() %}
		{{ message }}
		{%- endfor %}
	</body>
	<script>
		const mode = '<p>{{ session["mode"] }}</p>';
		if(mode == '<p>Dark</p>'){
			document.getElementById('img_logo').src= "{{ url_for('static', filename='todo_dark_mode.png') }}";
			document.getElementById('theme').classList.add('darkmode')
			document.getElementById('theme').classList.remove('lightmode')
		}
		else if(mode == '<p>Light</p>'){
			document.getElementById('img_logo').src= "{{ url_for('static', filename='todo.png') }}";
			document.getElementById('theme').classList.add('lightmode')
			document.getElementById('theme').classList.remove('darkmode')
		}

	</script>
	<script>
		const mode = '<p>{{ session["mode"] }}</p>';
		if(mode == '<p>Dark</p>'){
			document.getElementById('img_logo').src= "{{ url_for('static', filename='todo_dark_mode.png') }}";
			document.getElementById('theme').classList.add('darkmode')
			document.getElementById('theme').classList.remove('lightmode')
		}
		else if(mode == '<p>Light</p>'){
			document.getElementById('img_logo').src= "{{ url_for('static', filename='todo.png') }}";
			document.getElementById('theme').classList.add('lightmode')
			document.getElementById('theme').classList.remove('darkmode')
		}

	</script>
  </html>
